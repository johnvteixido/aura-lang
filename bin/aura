#!/usr/bin/env ruby

require "aura"

if ARGV.empty?
  puts <<~WELCOME
    ðŸŒŸ Welcome to Aura v0.1 ðŸŒŸ
    A forgiving, human-friendly language for AI and fast web apps.

    Usage:
      aura run examples/mnist_classifier.aura  # Run an Aura file
  WELCOME
  exit
end

command = ARGV[0]
filename = ARGV[1]

case command
when "run"
  if filename && File.exist?(filename)
    Aura.run_file(filename)
  else
    puts "ðŸ˜” File not found: #{filename}."
    puts "Creating a basic template for you! ðŸŒŸ"
    File.write(filename, <<~AURA)
      model greeter neural_network do
        input text
        output greeting "Hello from Aura! ðŸŒŸ"
      end

      route "/hello" get do
        output prediction from greeter.predict(input) format :json
      end

      run web on port: 3000
    AURA
    puts "âœ… Created #{filename}. Run 'aura run #{filename}' to start it."
  end
else
  puts "Unknown command: #{command}"
end
